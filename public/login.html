<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Login - Timetable Generator</title>
  <link rel="stylesheet" href="/styles.css">
  <style>
    .center { min-height: 100dvh; display:flex; align-items:center; justify-content:center; padding:16px; }
    .card { width:100%; max-width:380px; background:var(--card); border:1px solid #1f2937; border-radius:12px; padding:16px; }
    .card h2 { margin:0 0 8px; }
    .card p { margin:0 0 16px; color: var(--muted); }
    .row { display:flex; flex-direction:column; gap:6px; margin-bottom:12px; }
    .row select { background:#0b1220; color:var(--text); border:1px solid #1f2937; border-radius:8px; padding:10px 12px; }
    .muted { color: var(--muted); font-size: 12px; }
    .inline { display:flex; align-items:center; gap:8px; }
    .hint { font-size:12px; color:#9ca3af; margin-top:-6px; }
  </style>
  <script defer src="/login.js"></script>
  <script>
    // Redirect if already logged in
    (function(){
      try{
        const user = JSON.parse(localStorage.getItem('tt_user') || 'null');
        if(user && user.email && user.role){ location.replace('/'); }
      }catch{}
    })();
  </script>
  
</head>
<body>
  <div class="center">
    <section class="card">
      <h2>Welcome</h2>
      <p>Sign in to use the Timetable Generator.</p>

      <div class="row">
        <label for="email">Email</label>
        <input id="email" type="email" placeholder="you@srec.ac.in" />
        <span class="hint">Use your institutional email (must end with @srec.ac.in)</span>
      </div>
      <div class="row" id="loginPwdRow">
        <label for="password">Password</label>
        <div class="inline" style="justify-content:space-between; gap:8px;">
          <input id="password" type="password" placeholder="Enter your password" style="flex:1;" />
          <button id="togglePwd" class="secondary" style="white-space:nowrap;">Show</button>
        </div>
      </div>
      <button id="resetBtn" class="secondary" style="margin-top:4px;">Reset password</button>

      <div class="inline" style="justify-content:space-between; margin-top:8px;">
        <button id="loginBtn">Sign in</button>
        <button id="toggleCreateBtn" class="secondary">Create account</button>
      </div>

      <div id="createWrap" style="display:none; margin-top:12px;">
        <div class="row">
          <label for="newPassword">Create password</label>
          <div class="inline" style="justify-content:space-between; gap:8px;">
            <input id="newPassword" type="password" placeholder="At least 8 characters" style="flex:1;" />
            <button id="toggleNewPwd" class="secondary" style="white-space:nowrap;">Show</button>
          </div>
        </div>
        <div class="row">
          <label for="confirmPassword">Confirm password</label>
          <div class="inline" style="justify-content:space-between; gap:8px;">
            <input id="confirmPassword" type="password" placeholder="Re-enter password" style="flex:1;" />
            <button id="toggleConfirmPwd" class="secondary" style="white-space:nowrap;">Show</button>
          </div>
        </div>
        <p class="muted">Accounts can only be created with emails ending in @srec.ac.in.</p>
        <button id="createBtn">Create account</button>
      </div>

      <p id="loginStatus" class="status" style="margin-top:8px;"></p>
    </section>
  </div>
</body>
</html>


